# Aurora Input Processor - æ ¸å¿ƒæ•°æ®ç»“æ„

æœ¬æ–‡æ¡£ä»‹ç» Aurora Input Processor ä¸­å¯é…ç½®ç»„ä»¶çš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œå¸®åŠ©å¼€å‘è€…ç†è§£ç³»ç»Ÿæ¶æ„å’Œæ‰©å±•æ’ä»¶åŠŸèƒ½ã€‚

## ç›®å½•

- [æ¦‚è¿°](#æ¦‚è¿°)
- [æ ¸å¿ƒæ•°æ®ç»“æ„](#æ ¸å¿ƒæ•°æ®ç»“æ„)
  - [ProcessorConfig](#processorconfig)
  - [PromptConfig](#promptconfig)
  - [PromptInput](#promptinput)
  - [PromptOption](#promptoption)
  - [PromptValues](#promptvalues)
- [å­—æ®µç±»å‹è¯¦è§£](#å­—æ®µç±»å‹è¯¦è§£)
- [æ•°æ®æµè½¬å…³ç³»](#æ•°æ®æµè½¬å…³ç³»)
- [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)

---

## æ¦‚è¿°

Aurora Input Processor é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼š

```
Processor â†’ Prompt â†’ Input â†’ Option
    â†“         â†“        â†“
  é…ç½®å±‚   æ¨¡æ¿å±‚   å­—æ®µå±‚
```

- **Processor**: ç®¡ç†ä¸€ç»„æç¤ºè¯çš„å®¹å™¨
- **Prompt**: å•ä¸ªæç¤ºè¯é…ç½®ï¼ŒåŒ…å«è¡¨å•å®šä¹‰å’Œå†…å®¹æ¨¡æ¿
- **Input**: è¡¨å•ä¸­çš„å•ä¸ªè¾“å…¥å­—æ®µ
- **Option**: é€‰æ‹©ç±»å­—æ®µçš„é€‰é¡¹é…ç½®

---

## æ ¸å¿ƒæ•°æ®ç»“æ„

### ProcessorConfig

**æ–‡ä»¶ä½ç½®**: `src/types/processor.ts`

Processor æ˜¯ç®¡ç†ç‰¹å®šç›®å½•ä¸‹æç¤ºè¯çš„é…ç½®å®ä½“ã€‚æ¯ä¸ª Processor å¯¹åº”ä¸€ä¸ª Raycast å‘½ä»¤ï¼ˆProcessor 1-9ï¼‰ã€‚

```typescript
interface ProcessorConfig {
  id: string;           // å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå¦‚ "processor-1"
  name: string;         // æ˜¾ç¤ºåç§°ï¼Œå¦‚ "å·¥ä½œæç¤ºè¯"
  directory: string;    // æç¤ºè¯æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„
  icon?: string;        // å¯é€‰å›¾æ ‡ï¼Œä½¿ç”¨ Raycast å›¾æ ‡åç§°
  createdAt: number;    // åˆ›å»ºæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
}
```

**å­—æ®µè¯´æ˜**:

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `id` | string | âœ… | å…¨å±€å”¯ä¸€æ ‡è¯†ï¼Œå»ºè®®ä½¿ç”¨ "processor-N" æ ¼å¼ |
| `name` | string | âœ… | åœ¨ Raycast ä¸­æ˜¾ç¤ºçš„åç§° |
| `directory` | string | âœ… | æç¤ºè¯ Markdown æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„ |
| `icon` | string | âŒ | Raycast å›¾æ ‡åç§°ï¼Œå¦‚ "list-bullet" |
| `createdAt` | number | âœ… | Unix æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰ï¼Œç”¨äºæ’åº |

**é…ç½®æ–¹å¼**:
- ç›´æ¥åœ¨ Raycast Preferences ä¸­é…ç½®
- æ— éœ€ä»£ç å±‚ç®¡ç†ï¼Œé…ç½®å³æ—¶ç”Ÿæ•ˆ

---

### PromptConfig

**æ–‡ä»¶ä½ç½®**: `src/types/prompt.ts`

Prompt å®šä¹‰äº†å•ä¸ªæç¤ºè¯çš„å®Œæ•´é…ç½®ï¼Œä» Markdown æ–‡ä»¶çš„ YAML frontmatter å’Œæ­£æ–‡è§£æè€Œæ¥ã€‚

```typescript
interface PromptConfig {
  title: string;           // æç¤ºè¯æ ‡é¢˜
  formDescription?: string; // è¡¨å•é¡¶éƒ¨çš„è¯´æ˜æ–‡å­—
  execScript?: string;     // è„šæœ¬è·¯å¾„ï¼Œå­˜åœ¨æ—¶æ‰§è¡Œè„šæœ¬è€Œéç²˜è´´å†…å®¹
  inputs: PromptInput[];   // è¡¨å•å­—æ®µé…ç½®æ•°ç»„
  content: string;         // Markdown æ­£æ–‡ï¼ŒåŒ…å« {{variable}} å ä½ç¬¦
  filePath?: string;       // æºæ–‡ä»¶è·¯å¾„ï¼Œç”¨äºè°ƒè¯•
}
```

**å­—æ®µè¯´æ˜**:

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `title` | string | âœ… | æç¤ºè¯çš„æ ‡é¢˜ï¼Œæ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­ |
| `formDescription` | string | âŒ | è¡¨å•é¡¶éƒ¨çš„è¯´æ˜æ–‡å­—ï¼Œæ”¯æŒ Markdown |
| `execScript` | string | âŒ | è„šæœ¬è·¯å¾„ï¼Œé…ç½®åæäº¤è¡¨å•å°†æ‰§è¡Œè„šæœ¬è€Œéè¾“å‡ºå†…å®¹ |
| `inputs` | PromptInput[] | âœ… | è¡¨å•å­—æ®µé…ç½®æ•°ç»„ |
| `content` | string | âœ… | æ¨¡æ¿æ­£æ–‡ï¼Œä½¿ç”¨ `{{å˜é‡å}}` è¯­æ³• |
| `filePath` | string | âŒ | æº Markdown æ–‡ä»¶è·¯å¾„ |

**Markdown æ–‡ä»¶ç»“æ„**:

```markdown
---
title: æç¤ºè¯æ ‡é¢˜
formDescription: è¿™æ˜¯è¡¨å•è¯´æ˜ï¼ˆå¯é€‰ï¼‰
execScript: /path/to/script.shï¼ˆå¯é€‰ï¼‰
inputs:
  - id: name
    label: å§“å
    type: text
    required: true
---

ä½ å¥½ï¼Œæˆ‘æ˜¯ {{name}}ã€‚
```

---

### PromptInput

**æ–‡ä»¶ä½ç½®**: `src/types/prompt.ts`

PromptInput å®šä¹‰è¡¨å•ä¸­çš„å•ä¸ªè¾“å…¥å­—æ®µé…ç½®ã€‚

```typescript
interface PromptInput {
  id: string;                    // å­—æ®µå”¯ä¸€æ ‡è¯†
  label: string;                 // å­—æ®µæ ‡ç­¾
  type: PromptInputType;         // å­—æ®µç±»å‹
  required?: boolean;            // æ˜¯å¦å¿…å¡«
  default?: string | string[] | boolean; // é»˜è®¤å€¼
  description?: string;          // å­—æ®µè¯´æ˜æ–‡å­—
  isExtraInput?: boolean;        // æ˜¯å¦ä¸ºæ¡ä»¶æ˜¾ç¤ºå­—æ®µ
  options?: PromptOption[];      // é€‰é¡¹ï¼ˆselect/multiselect ç±»å‹ï¼‰
  folder?: string;               // ç›®å½•è·¯å¾„ï¼ˆselectInFolder ç±»å‹ï¼‰
  valueItemType?: 0 | 1 | 2;    // é¡¹ç›®ç±»å‹è¿‡æ»¤ï¼ˆselectInFolderï¼‰
  regIncludeFilter?: string;     // æ­£åˆ™åŒ…å«è¿‡æ»¤å™¨ï¼ˆselectInFolderï¼‰
  regExcludeFilter?: string;     // æ­£åˆ™æ’é™¤è¿‡æ»¤å™¨ï¼ˆselectInFolderï¼‰
}
```

**å­—æ®µè¯´æ˜**:

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `id` | string | âœ… | å­—æ®µå”¯ä¸€æ ‡è¯†ï¼Œç”¨äºæ¨¡æ¿å˜é‡å¼•ç”¨ |
| `label` | string | âœ… | æ˜¾ç¤ºåœ¨è¡¨å•ä¸­çš„æ ‡ç­¾æ–‡å­— |
| `type` | PromptInputType | âœ… | å­—æ®µç±»å‹ï¼Œè§[å­—æ®µç±»å‹è¯¦è§£](#å­—æ®µç±»å‹è¯¦è§£) |
| `required` | boolean | âŒ | æ˜¯å¦å¿…å¡«ï¼Œé»˜è®¤ false |
| `default` | string\|string[]\|boolean | âŒ | é»˜è®¤å€¼ï¼Œç±»å‹å–å†³äº `type` |
| `description` | string | âŒ | å­—æ®µè¯´æ˜æ–‡å­—ï¼Œæ˜¾ç¤ºåœ¨è¾“å…¥æ¡†ä¸‹æ–¹ |
| `isExtraInput` | boolean | âŒ | æ ‡è®°ä¸ºæ¡ä»¶æ˜¾ç¤ºå­—æ®µï¼Œé»˜è®¤éšè— |
| `options` | PromptOption[] | âŒ | select/multiselect ç±»å‹çš„é€‰é¡¹æ•°ç»„ |
| `folder` | string | âŒ | selectInFolder ç±»å‹çš„ç›®æ ‡ç›®å½•è·¯å¾„ |
| `valueItemType` | 0\|1\|2 | âŒ | selectInFolder è¿‡æ»¤ï¼š0=å…¨éƒ¨ï¼Œ1=ä»…ç›®å½•ï¼Œ2=ä»…æ–‡ä»¶ |
| `regIncludeFilter` | string | âŒ | selectInFolder æ­£åˆ™åŒ…å«è¿‡æ»¤å™¨ |
| `regExcludeFilter` | string | âŒ | selectInFolder æ­£åˆ™æ’é™¤è¿‡æ»¤å™¨ |

**æ¡ä»¶æ˜¾ç¤ºæœºåˆ¶**:
- è®¾ç½® `isExtraInput: true` çš„å­—æ®µé»˜è®¤éšè—
- å½“å…¶ä»–å­—æ®µçš„é€‰é¡¹è¢«é€‰ä¸­ä¸”è¯¥é€‰é¡¹çš„ `extraInputs` åŒ…å«æ­¤å­—æ®µ ID æ—¶æ˜¾ç¤º

---

### PromptOption

**æ–‡ä»¶ä½ç½®**: `src/types/prompt.ts`

PromptOption å®šä¹‰é€‰æ‹©ç±»å­—æ®µï¼ˆselectã€multiselectï¼‰çš„å•ä¸ªé€‰é¡¹é…ç½®ã€‚

```typescript
interface PromptOption {
  value: string;        // é€‰é¡¹å€¼
  label?: string;       // æ˜¾ç¤ºæ–‡å­—ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨ valueï¼‰
  isDefault?: boolean;  // æ˜¯å¦ä¸ºé»˜è®¤é€‰ä¸­
  extraInputs?: string[]; // é€‰ä¸­æ—¶æ˜¾ç¤ºçš„é¢å¤–å­—æ®µ ID æ•°ç»„
}
```

**å­—æ®µè¯´æ˜**:

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `value` | string | âœ… | é€‰é¡¹çš„å®é™…å€¼ï¼Œç”¨äºæ¨¡æ¿æ›¿æ¢ |
| `label` | string | âŒ | æ˜¾ç¤ºç»™ç”¨æˆ·çš„æ–‡å­—ï¼Œé»˜è®¤ä½¿ç”¨ `value` |
| `isDefault` | boolean | âŒ | æ˜¯å¦é»˜è®¤é€‰ä¸­ï¼Œé»˜è®¤ false |
| `extraInputs` | string[] | âŒ | é€‰ä¸­æ­¤é€‰é¡¹æ—¶æ˜¾ç¤ºçš„é¢å¤–å­—æ®µ ID æ•°ç»„ |

**extraInputs å·¥ä½œåŸç†**:
1. å®šä¹‰é€‰é¡¹æ—¶æŒ‡å®š `extraInputs: ["field1", "field2"]`
2. å¯¹åº”å­—æ®µé…ç½®ä¸­è®¾ç½® `isExtraInput: true`
3. é€‰ä¸­è¯¥é€‰é¡¹æ—¶ï¼Œå…³è”å­—æ®µè‡ªåŠ¨æ˜¾ç¤º
4. multiselect ç±»å‹ä¼šåˆå¹¶æ‰€æœ‰é€‰ä¸­é€‰é¡¹çš„ extraInputs

---

### PromptValues

**æ–‡ä»¶ä½ç½®**: `src/types/prompt.ts`

PromptValues å­˜å‚¨ç”¨æˆ·åœ¨è¡¨å•ä¸­è¾“å…¥çš„å€¼ã€‚

```typescript
interface PromptValues {
  [key: string]: string | string[] | boolean;
}
```

**å€¼ç±»å‹æ˜ å°„**:

| å­—æ®µç±»å‹ | å€¼ç±»å‹ | ç¤ºä¾‹ |
|----------|--------|------|
| `text` | string | `"å¼ ä¸‰"` |
| `textarea` | string | `"å¤šè¡Œ\næ–‡æœ¬"` |
| `select` | string | `"option1"` |
| `multiselect` | string[] | `["opt1", "opt2"]` |
| `checkbox` | boolean | `true` |
| `selectInFolder` | string | `"/path/to/file.md"` |

---

## å­—æ®µç±»å‹è¯¦è§£

**æ–‡ä»¶ä½ç½®**: `src/types/prompt.ts`

```typescript
type PromptInputType =
  | "text"           // å•è¡Œæ–‡æœ¬è¾“å…¥
  | "textarea"       // å¤šè¡Œæ–‡æœ¬è¾“å…¥
  | "select"         // å•é€‰ä¸‹æ‹‰æ¡†
  | "multiselect"    // å¤šé€‰æ ‡ç­¾é€‰æ‹©å™¨
  | "checkbox"       // å¤é€‰æ¡†
  | "selectInFolder"; // ç›®å½•æ–‡ä»¶é€‰æ‹©å™¨
```

### ç±»å‹è¯¦ç»†è¯´æ˜

#### 1. text - å•è¡Œæ–‡æœ¬è¾“å…¥

**ç»„ä»¶**: `Form.TextField`

**ç”¨é€”**: è¾“å…¥ç®€çŸ­çš„æ–‡æœ¬ä¿¡æ¯ï¼Œå¦‚å§“åã€æ ‡é¢˜ç­‰

**é…ç½®ç¤ºä¾‹**:
```yaml
- id: name
  label: å§“å
  type: text
  required: true
  default: å¼ ä¸‰
  description: è¯·è¾“å…¥ä½ çš„å§“å
```

---

#### 2. textarea - å¤šè¡Œæ–‡æœ¬è¾“å…¥

**ç»„ä»¶**: `Form.TextArea`

**ç”¨é€”**: è¾“å…¥è¾ƒé•¿çš„æ–‡æœ¬å†…å®¹ï¼Œå¦‚æè¿°ã€è¯´æ˜ç­‰

**é…ç½®ç¤ºä¾‹**:
```yaml
- id: description
  label: é¡¹ç›®æè¿°
  type: textarea
  required: false
  description: è¯¦ç»†æè¿°é¡¹ç›®èƒŒæ™¯å’Œç›®æ ‡
```

---

#### 3. select - å•é€‰ä¸‹æ‹‰æ¡†

**ç»„ä»¶**: `Form.Dropdown`

**ç”¨é€”**: ä»é¢„å®šä¹‰é€‰é¡¹ä¸­é€‰æ‹©ä¸€ä¸ªå€¼

**é…ç½®ç¤ºä¾‹**:
```yaml
- id: level
  label: ç­‰çº§
  type: select
  required: true
  options:
    - value: beginner
      label: åˆçº§
      isDefault: true
    - value: intermediate
      label: ä¸­çº§
    - value: advanced
      label: é«˜çº§
      extraInputs: [experience_years]
```

---

#### 4. multiselect - å¤šé€‰æ ‡ç­¾é€‰æ‹©å™¨

**ç»„ä»¶**: `Form.TagPicker`

**ç”¨é€”**: ä»é¢„å®šä¹‰é€‰é¡¹ä¸­é€‰æ‹©å¤šä¸ªå€¼

**é…ç½®ç¤ºä¾‹**:
```yaml
- id: skills
  label: æŠ€èƒ½
  type: multiselect
  required: true
  options:
    - value: js
      label: JavaScript
    - value: ts
      label: TypeScript
    - value: react
      label: React
```

**æ¨¡æ¿æ›¿æ¢**: å¤šé€‰å€¼è‡ªåŠ¨è½¬æ¢ä¸ºé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²
```
é€‰ä¸­: ["js", "ts"] â†’ æ›¿æ¢ä¸º: "js, ts"
```

---

#### 5. checkbox - å¤é€‰æ¡†

**ç»„ä»¶**: `Form.Checkbox`

**ç”¨é€”**: å¸ƒå°”å€¼é€‰æ‹©ï¼Œè¡¨ç¤ºæ˜¯/å¦

**é…ç½®ç¤ºä¾‹**:
```yaml
- id: agree
  label: åŒæ„æ¡æ¬¾
  type: checkbox
  default: false
```

**æ¨¡æ¿æ›¿æ¢**: å¸ƒå°”å€¼è½¬æ¢ä¸ºä¸­æ–‡
```
true  â†’ "æ˜¯"
false â†’ "å¦"
```

---

#### 6. selectInFolder - ç›®å½•æ–‡ä»¶é€‰æ‹©å™¨

**ç»„ä»¶**: `Form.Dropdown` (åŠ¨æ€é€‰é¡¹)

**ç”¨é€”**: ä»æŒ‡å®šç›®å½•ä¸­é€‰æ‹©æ–‡ä»¶æˆ–å­ç›®å½•

**é…ç½®ç¤ºä¾‹**:
```yaml
- id: template
  label: æ¨¡æ¿æ–‡ä»¶
  type: selectInFolder
  folder: /Users/username/templates
  valueItemType: 2              # ä»…æ˜¾ç¤ºæ–‡ä»¶
  regIncludeFilter: \.md$       # ä»…åŒ…å« .md æ–‡ä»¶
  regExcludeFilter: ^_          # æ’é™¤ä»¥ _ å¼€å¤´çš„æ–‡ä»¶
  required: true
```

**è¿‡æ»¤å™¨è¯´æ˜**:

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| `valueItemType` | 0 | æ˜¾ç¤ºç›®å½•å’Œæ–‡ä»¶ï¼ˆé»˜è®¤ï¼‰ |
| | 1 | ä»…æ˜¾ç¤ºç›®å½• |
| | 2 | ä»…æ˜¾ç¤ºæ–‡ä»¶ |
| `regIncludeFilter` | æ­£åˆ™å­—ç¬¦ä¸² | åŒ…å«åŒ¹é…çš„é¡¹ç›® |
| `regExcludeFilter` | æ­£åˆ™å­—ç¬¦ä¸² | æ’é™¤åŒ¹é…çš„é¡¹ç›® |

**é€‰é¡¹æ˜¾ç¤ºæ ¼å¼**:
- æ–‡ä»¶: `ğŸ“„ filename.ext`
- ç›®å½•: `ğŸ“ dirname`

---

## æ•°æ®æµè½¬å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. é…ç½®å±‚ï¼ˆRaycast Preferencesï¼‰                            â”‚
â”‚    ProcessorConfig â†’ directory è·¯å¾„                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. æ–‡ä»¶æ‰«æå±‚                                               â”‚
â”‚    è¯»å– directory ä¸‹æ‰€æœ‰ .md æ–‡ä»¶                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. è§£æå±‚ï¼ˆgray-matterï¼‰                                    â”‚
â”‚    Markdown â†’ PromptConfig (frontmatter + content)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. æ¸²æŸ“å±‚ï¼ˆReact ç»„ä»¶ï¼‰                                     â”‚
â”‚    PromptConfig.inputs â†’ åŠ¨æ€ç”Ÿæˆè¡¨å•å­—æ®µ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. è¾“å…¥å±‚ï¼ˆç”¨æˆ·å¡«å†™ï¼‰                                       â”‚
â”‚    è¡¨å•å­—æ®µ â†’ PromptValues                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. å¤„ç†å±‚                                                   â”‚
â”‚    åˆ†æ”¯1: execScript å­˜åœ¨                                   â”‚
â”‚      â†’ æ‰§è¡Œè„šæœ¬ï¼Œä¼ é€’ç¯å¢ƒå˜é‡                               â”‚
â”‚    åˆ†æ”¯2: execScript ä¸å­˜åœ¨                                 â”‚
â”‚      â†’ æ¨¡æ¿æ›¿æ¢ï¼ˆ{{variable}} â†’ valueï¼‰                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. è¾“å‡ºå±‚                                                   â”‚
â”‚    - Enter: ç²˜è´´åˆ°å‰å°åº”ç”¨                                  â”‚
â”‚    - Cmd+Enter: å¤åˆ¶åˆ°å‰ªè´´æ¿                                â”‚
â”‚    - execScript: æ˜¾ç¤ºè„šæœ¬æ‰§è¡Œç»“æœ                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: åŸºç¡€æ–‡æœ¬è¾“å…¥

**æ–‡ä»¶**: `simple-intro.md`

```markdown
---
title: è‡ªæˆ‘ä»‹ç»
inputs:
  - id: name
    label: å§“å
    type: text
    required: true
  - id: job
    label: èŒä¸š
    type: text
    required: true
---

ä½ å¥½ï¼Œæˆ‘æ˜¯ {{name}}ï¼Œç›®å‰ä»äº‹ {{job}} å·¥ä½œã€‚
```

**è¡¨å•è¾“å…¥**:
- name: `å¼ ä¸‰`
- job: `è½¯ä»¶å·¥ç¨‹å¸ˆ`

**è¾“å‡ºç»“æœ**:
```
ä½ å¥½,æˆ‘æ˜¯ å¼ ä¸‰,ç›®å‰ä»äº‹ è½¯ä»¶å·¥ç¨‹å¸ˆ å·¥ä½œã€‚
```

---

### ç¤ºä¾‹ 2: æ¡ä»¶å­—æ®µæ˜¾ç¤º

**æ–‡ä»¶**: `conditional-form.md`

```markdown
---
title: é¡¹ç›®ä¿¡æ¯
inputs:
  - id: project_type
    label: é¡¹ç›®ç±»å‹
    type: select
    required: true
    options:
      - value: web
        label: Web åº”ç”¨
        extraInputs: [frontend_framework]
      - value: mobile
        label: ç§»åŠ¨åº”ç”¨
        extraInputs: [platform]
      - value: desktop
        label: æ¡Œé¢åº”ç”¨

  - id: frontend_framework
    label: å‰ç«¯æ¡†æ¶
    type: select
    isExtraInput: true
    options:
      - value: react
        label: React
      - value: vue
        label: Vue

  - id: platform
    label: å¹³å°
    type: multiselect
    isExtraInput: true
    options:
      - value: ios
        label: iOS
      - value: android
        label: Android
---

é¡¹ç›®ç±»å‹: {{project_type}}
{{#if frontend_framework}}å‰ç«¯æ¡†æ¶: {{frontend_framework}}{{/if}}
{{#if platform}}æ”¯æŒå¹³å°: {{platform}}{{/if}}
```

**äº¤äº’æµç¨‹**:
1. é€‰æ‹© "Web åº”ç”¨" â†’ æ˜¾ç¤º "å‰ç«¯æ¡†æ¶" å­—æ®µ
2. é€‰æ‹© "ç§»åŠ¨åº”ç”¨" â†’ æ˜¾ç¤º "å¹³å°" å­—æ®µ
3. é€‰æ‹© "æ¡Œé¢åº”ç”¨" â†’ æ— é¢å¤–å­—æ®µ

---

### ç¤ºä¾‹ 3: è„šæœ¬æ‰§è¡Œ

**æ–‡ä»¶**: `deploy.md`

```markdown
---
title: éƒ¨ç½²è„šæœ¬
execScript: /Users/username/scripts/deploy.sh
inputs:
  - id: environment
    label: ç¯å¢ƒ
    type: select
    required: true
    options:
      - value: dev
        label: å¼€å‘ç¯å¢ƒ
      - value: staging
        label: æµ‹è¯•ç¯å¢ƒ
      - value: prod
        label: ç”Ÿäº§ç¯å¢ƒ

  - id: branch
    label: åˆ†æ”¯
    type: text
    required: true
    default: main
---
```

**è„šæœ¬æ¥æ”¶ç¯å¢ƒå˜é‡**:
```bash
#!/bin/bash
echo "ç¯å¢ƒ: $ENVIRONMENT"
echo "åˆ†æ”¯: $BRANCH"
# æ‰§è¡Œéƒ¨ç½²é€»è¾‘...
```

æäº¤è¡¨å•åå°†æ‰§è¡Œè„šæœ¬ï¼Œå¹¶æ˜¾ç¤ºæ‰§è¡Œç»“æœã€‚

---

### ç¤ºä¾‹ 4: ç›®å½•æ–‡ä»¶é€‰æ‹©

**æ–‡ä»¶**: `use-template.md`

```markdown
---
title: ä½¿ç”¨æ¨¡æ¿
inputs:
  - id: template
    label: é€‰æ‹©æ¨¡æ¿
    type: selectInFolder
    folder: /Users/username/templates
    valueItemType: 2
    regIncludeFilter: \.md$
    required: true

  - id: project_name
    label: é¡¹ç›®åç§°
    type: text
    required: true
---

åŸºäºæ¨¡æ¿ {{template}} åˆ›å»ºé¡¹ç›® {{project_name}}
```

**åŠŸèƒ½**:
- åŠ¨æ€è¯»å– `/Users/username/templates` ç›®å½•
- ä»…æ˜¾ç¤º `.md` æ–‡ä»¶
- ç”¨æˆ·é€‰æ‹©åè·å–å®Œæ•´è·¯å¾„

---

## æœ€ä½³å®è·µ

### 1. å­—æ®µå‘½åè§„èŒƒ

- ä½¿ç”¨å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿: `user_name`, `project_type`
- é¿å…ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦å’Œç©ºæ ¼
- ä¿æŒç®€æ´ä¸”å…·æœ‰æè¿°æ€§

### 2. å¿…å¡«å­—æ®µè®¾è®¡

- ä»…åœ¨çœŸæ­£å¿…è¦æ—¶è®¾ç½® `required: true`
- ä¸ºéå¿…å¡«å­—æ®µæä¾›åˆç†çš„é»˜è®¤å€¼
- åœ¨ description ä¸­è¯´æ˜å­—æ®µç”¨é€”

### 3. æ¡ä»¶å­—æ®µä½¿ç”¨

- åˆç†ä½¿ç”¨ extraInputs å‡å°‘è¡¨å•å¤æ‚åº¦
- é¿å…è¿‡æ·±çš„æ¡ä»¶åµŒå¥—ï¼ˆå»ºè®®ä¸è¶…è¿‡ 2 å±‚ï¼‰
- ç¡®ä¿æ¡ä»¶å­—æ®µçš„ ID åœ¨ extraInputs ä¸­æ­£ç¡®å¼•ç”¨

### 4. é€‰é¡¹è®¾è®¡

- ä¸ºé€‰é¡¹æä¾›æ¸…æ™°çš„ label
- ä½¿ç”¨ isDefault æŒ‡å®šå¸¸ç”¨é€‰é¡¹
- multiselect é€‰é¡¹æ•°é‡å»ºè®®ä¸è¶…è¿‡ 10 ä¸ª

### 5. æ¨¡æ¿ç¼–å†™

- ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å
- ä¸º multiselect å’Œ checkbox ç±»å‹é¢„ç•™æ ¼å¼è½¬æ¢ç©ºé—´
- è€ƒè™‘æ¡ä»¶å­—æ®µå¯èƒ½ä¸ºç©ºçš„æƒ…å†µ

### 6. æ–‡ä»¶ç»„ç»‡

- æŒ‰ç”¨é€”åˆ†ç±»å­˜æ”¾ Markdown æ–‡ä»¶
- ä½¿ç”¨æ¸…æ™°çš„æ–‡ä»¶å
- åœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ æ³¨é‡Šè¯´æ˜ç”¨é€”

---

## æ‰©å±•å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„å­—æ®µç±»å‹

1. åœ¨ `src/types/prompt.ts` ä¸­æ‰©å±• `PromptInputType`
2. åœ¨ `src/components/PromptField.tsx` ä¸­æ·»åŠ å¯¹åº”çš„æ¸²æŸ“é€»è¾‘
3. åœ¨ `src/utils/template.ts` ä¸­å¤„ç†æ–°ç±»å‹çš„å€¼æ›¿æ¢é€»è¾‘
4. æ›´æ–°æœ¬æ–‡æ¡£çš„[å­—æ®µç±»å‹è¯¦è§£](#å­—æ®µç±»å‹è¯¦è§£)éƒ¨åˆ†

### è‡ªå®šä¹‰éªŒè¯è§„åˆ™

ä¿®æ”¹ `src/components/PromptForm.tsx` ä¸­çš„éªŒè¯é€»è¾‘:

```typescript
const validateForm = (values: PromptValues): boolean => {
  // æ·»åŠ è‡ªå®šä¹‰éªŒè¯é€»è¾‘
  return true;
};
```

### æ‰©å±•æ¨¡æ¿å¼•æ“

ä¿®æ”¹ `src/utils/template.ts` æ”¯æŒæ›´å¤æ‚çš„æ¨¡æ¿è¯­æ³•:

```typescript
export function replaceVariables(
  template: string,
  values: PromptValues
): string {
  // æ·»åŠ æ–°çš„æ¨¡æ¿è¯­æ³•æ”¯æŒ
  return processedTemplate;
}
```

---

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•å®ç°å¤šçº§è”åŠ¨é€‰æ‹©?

A: ä½¿ç”¨ extraInputs æœºåˆ¶ï¼Œä¸ºæ¯ä¸ªé€‰é¡¹é…ç½®å…³è”å­—æ®µ:

```yaml
- id: category
  type: select
  options:
    - value: tech
      extraInputs: [tech_subcategory]
    - value: design
      extraInputs: [design_subcategory]

- id: tech_subcategory
  isExtraInput: true
  type: select
  options:
    - value: frontend
    - value: backend
```

### Q: multiselect çš„å€¼å¦‚ä½•åœ¨æ¨¡æ¿ä¸­æ ¼å¼åŒ–?

A: ç³»ç»Ÿè‡ªåŠ¨å°†æ•°ç»„è½¬æ¢ä¸ºé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ã€‚å¦‚éœ€è‡ªå®šä¹‰æ ¼å¼,ä¿®æ”¹ `src/utils/template.ts` ä¸­çš„è½¬æ¢é€»è¾‘ã€‚

### Q: å¦‚ä½•åœ¨è„šæœ¬ä¸­æ¥æ”¶è¡¨å•æ•°æ®?

A: å­—æ®µ ID ä¼šè½¬æ¢ä¸ºå¤§å†™ç¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚ `project_name` â†’ `PROJECT_NAME`

---

## ç›¸å…³æ–‡ä»¶

- ç±»å‹å®šä¹‰: `src/types/`
  - `processor.ts` - Processor é…ç½®
  - `prompt.ts` - Prompt æ ¸å¿ƒç±»å‹
  - `form.ts` - æ—§è¡¨å•ç±»å‹(å…¼å®¹)

- æ ¸å¿ƒç»„ä»¶: `src/components/`
  - `PromptList.tsx` - æç¤ºè¯åˆ—è¡¨
  - `PromptForm.tsx` - åŠ¨æ€è¡¨å•
  - `PromptField.tsx` - å­—æ®µæ¸²æŸ“å™¨

- å·¥å…·å‡½æ•°: `src/utils/`
  - `template.ts` - æ¨¡æ¿æ›¿æ¢å¼•æ“
  - `extraInputs.ts` - æ¡ä»¶å­—æ®µé€»è¾‘
  - `execScript.ts` - è„šæœ¬æ‰§è¡Œ

- é…ç½®åŠ è½½: `src/config/`
  - `prompts.ts` - Markdown æ–‡ä»¶è§£æ

---

## æ›´æ–°æ—¥å¿—

- **2025-12-16**: åˆå§‹ç‰ˆæœ¬åˆ›å»º
  - å®šä¹‰æ ¸å¿ƒæ•°æ®ç»“æ„
  - æ·»åŠ å­—æ®µç±»å‹è¯¦è§£
  - æä¾›ä½¿ç”¨ç¤ºä¾‹å’Œæœ€ä½³å®è·µ

---

**æ–‡æ¡£ç»´æŠ¤**: å½“æ·»åŠ æ–°åŠŸèƒ½æˆ–ä¿®æ”¹æ•°æ®ç»“æ„æ—¶,è¯·åŒæ­¥æ›´æ–°æœ¬æ–‡æ¡£ã€‚
